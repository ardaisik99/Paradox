<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Bluppie Puzzle - Telegram</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            background-color: #000; overflow: hidden; touch-action: none;
            display: flex; justify-content: center; align-items: center;
            font-family: sans-serif;
        }

        #gameContainer {
            position: relative; width: 100%; height: 100%;
            display: flex; justify-content: center; align-items: center;
        }

        canvas {
            max-width: 100vw; max-height: 100vh;
            background-color: #111; display: block;
        }

        /* YÜKLEME VE ÇEVİRME EKRANI */
        #uiOverlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #111; z-index: 9999;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            text-align: center; color: white;
        }

        /* MOBİL BUTONLAR (KONTROLLER) */
        .controls {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 1000;
        }
        .btn {
            position: absolute; background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.4); border-radius: 50%;
            width: 85px; height: 85px; pointer-events: auto;
            display: flex; justify-content: center; align-items: center;
            font-size: 32px; backdrop-filter: blur(5px);
            user-select: none;
        }
        .btn:active { background: rgba(255, 255, 255, 0.4); transform: scale(0.9); }

        #leftBtn { bottom: 30px; left: 30px; }
        #rightBtn { bottom: 30px; left: 140px; }
        #actionBtn { bottom: 30px; right: 30px; width: 100px; height: 100px; background: rgba(255, 50, 50, 0.3); }
        #cloneBtn { bottom: 150px; right: 40px; width: 70px; height: 70px; background: rgba(50, 50, 255, 0.3); font-size: 16px; font-weight: bold; }

        /* DİKEY EKRAN UYARISI */
        @media screen and (orientation: portrait) {
            #gameContainer { display: none; }
            #uiOverlay { display: flex !important; }
            #rotateMsg { display: block !important; }
            #loadingMsg { display: none; }
        }
    </style>
</head>
<body>

    <div id="uiOverlay">
        <div id="loadingMsg">
            <h2>YÜKLENİYOR...</h2>
            <p>Assets dosyaları kontrol ediliyor.</p>
        </div>
        <div id="rotateMsg" style="display: none;">
            <div style="width: 40px; height: 70px; border: 2px solid #fff; border-radius: 5px; animation: rot 2s infinite; margin: 20px auto;"></div>
            <h2>EKRANI ÇEVİRİN</h2>
            <p>Oyun sadece yatay modda çalışır.</p>
        </div>
    </div>

    <div id="gameContainer">
        <canvas id="gameCanvas"></canvas>
        <div class="controls">
            <div id="leftBtn" class="btn">⬅️</div>
            <div id="rightBtn" class="btn">➡️</div>
            <div id="cloneBtn" class="btn">KLON</div>
            <div id="actionBtn" class="btn">ZIPLA</div>
        </div>
    </div>

    <script src="game.js"></script>
    <style> @keyframes rot { 0% {transform: rotate(0deg);} 50% {transform: rotate(90deg);} 100% {transform: rotate(90deg);} } </style>
</body>
</html>