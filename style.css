/* --- GENERAL --- */
body {
    margin: 0; padding: 0;
    background: linear-gradient(135deg, #dff9fb 0%, #c7ecee 100%);
    height: 100vh; width: 100vw;
    display: flex; justify-content: center; align-items: center;
    overflow: hidden; font-family: 'Fredoka', sans-serif;
    user-select: none; -webkit-user-select: none;
    transition: background 0.3s;
}
body.dark-mode { background: linear-gradient(135deg, #2d3436 0%, #000000 100%); }

#shake-wrapper { width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; }
.shake-effect { animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both; }
@keyframes shake {
  10%, 90% { transform: translate3d(-4px, 0, 0); }
  20%, 80% { transform: translate3d(6px, 0, 0); }
  30%, 50%, 70% { transform: translate3d(-8px, 0, 0); }
  40%, 60% { transform: translate3d(8px, 0, 0); }
}

#game-container {
    position: relative; width: 100%; height: 100%; max-width: 56.25vh;
    background-color: #81ecec; box-shadow: 0 0 40px rgba(0, 168, 255, 0.2);
    overflow: hidden; transition: filter 0.3s;
}
body.dark-mode #game-container { box-shadow: 0 0 40px rgba(0, 0, 0, 0.5); }
body.dark-mode canvas { filter: brightness(0.75); }
canvas { display: block; width: 100%; height: 100%; }

/* --- PANELS --- */
.ui-panel {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(255, 255, 255, 0.6);
    backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px);
    display: flex; flex-direction: column; justify-content: center; align-items: center;
    z-index: 100; transition: background 0.3s;
}
#loadingScreen { z-index: 9999 !important; background: linear-gradient(135deg, #dff9fb 0%, #c7ecee 100%); }
body.dark-mode .ui-panel { background: rgba(0, 0, 0, 0.7); color: white; }

/* --- BUTTONS STYLES (DÜZENLENDİ) --- */
.game-btn { 
    font-family: 'Fredoka', sans-serif; border: none; border-radius: 50px; 
    font-weight: 700; color: white; cursor: pointer; 
    transition: all 0.1s; text-transform: uppercase; 
    box-shadow: 0 8px 15px rgba(0, 168, 255, 0.3); margin-top: 5px;
}
.game-btn:active { top: 4px; box-shadow: 0 4px 5px rgba(0, 168, 255, 0.3); }

/* Giriş Ekranı İçin Özel Düzen */
.big-main-btn {
    width: 75%;
    font-size: 6vmin;
    padding: 18px 0;
}

.row-buttons {
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    width: 75%; /* Büyük butonla aynı genişlik */
    gap: 15px;
}

.half-btn {
    flex: 1; /* Boşluğu eşit paylaş */
    font-size: 4vmin; /* Yazı daha küçük */
    padding: 12px 0;
    margin-top: 0; /* Hizalama için */
    border-radius: 20px; /* Daha karemsi */
}

/* Diğer menülerdeki küçük butonlar */
.small-btn { padding: 12px 30px; font-size: 4.5vmin; width: 60%; border-radius: 30px; }

.start-btn, .resume-btn { background: linear-gradient(to bottom, #00a8ff, #0097e6); border-bottom: 5px solid #007bb8; }
.retry-btn { background: linear-gradient(to bottom, #00cec9, #00b894); border-bottom: 5px solid #008f72; }
.home-btn, .home-btn-small { background: linear-gradient(to bottom, #74b9ff, #0984e3); border-bottom: 5px solid #06528d; }
.settings-btn { background: linear-gradient(to bottom, #b2bec3, #636e72); border-bottom: 5px solid #2d3436; }
.market-btn { background: linear-gradient(to bottom, #f1c40f, #f39c12); border-bottom: 5px solid #d35400; }

.home-btn-small { background: transparent; border: 2px solid #0984e3; color: #0984e3; box-shadow: none; }
body.dark-mode .home-btn-small { border-color: #74b9ff; color: #74b9ff; }

/* --- NFT MARKET STYLES --- */
.nft-grid {
    display: grid; grid-template-columns: 1fr 1fr; gap: 15px;
    width: 85%; max-height: 55vh; overflow-y: auto; padding: 10px;
}
.nft-card {
    background: rgba(255, 255, 255, 0.8); border-radius: 15px; padding: 10px;
    display: flex; flex-direction: column; align-items: center;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1); border: 2px solid transparent;
    transition: transform 0.2s; cursor: pointer;
}
.nft-card:active { transform: scale(0.95); }
.nft-card.locked { opacity: 0.8; filter: grayscale(20%); }
.nft-image-box {
    width: 100%; aspect-ratio: 1 / 1; background: #dff9fb; border-radius: 12px;
    display: flex; justify-content: center; align-items: center; margin-bottom: 8px;
    overflow: hidden; border: 2px solid #eee;
}
.nft-image-box img { width: 80%; height: 80%; object-fit: contain; }
.nft-info { display: flex; flex-direction: column; align-items: center; width: 100%; }
.nft-name { font-size: 3.5vmin; font-weight: bold; color: #333; margin-bottom: 4px; }
.nft-price { font-size: 3.5vmin; font-weight: bold; color: #fff; background: #00cec9; padding: 4px 12px; border-radius: 15px; }
body.dark-mode .nft-card { background: rgba(60, 60, 60, 0.8); }
body.dark-mode .nft-name { color: white; }

/* --- HUD --- */
#hudLayer {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    pointer-events: none; z-index: 50; padding: 15px; box-sizing: border-box;
    display: flex; justify-content: space-between; align-items: flex-start;
}
#questBox {
    position: absolute; top: 100px; left: 50%; transform: translateX(-50%);
    background: rgba(255, 255, 255, 0.9); padding: 5px 10px; border-radius: 12px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1); border: 2px solid #00a8ff;
    text-align: center; width: 50%; pointer-events: none; transition: transform 0.3s ease;
}
#questText { margin: 0 0 3px 0; font-size: 3vmin; color: #0097e6; font-weight: 700; }
.progress-bar-bg { width: 100%; height: 6px; background: #dfe6e9; border-radius: 3px; overflow: hidden; }
.progress-bar-fill { height: 100%; background: linear-gradient(to right, #00cec9, #00b894); width: 0%; transition: width 0.3s ease-out; }
.quest-complete { animation: bounceQuest 0.5s ease-in-out; border-color: #00b894 !important; }
@keyframes bounceQuest { 0%, 100% { transform: translateX(-50%) scale(1); } 50% { transform: translateX(-50%) scale(1.1); } }
body.dark-mode #questBox { background: rgba(45, 52, 54, 0.95); border-color: #74b9ff; }
body.dark-mode #questText { color: #74b9ff; }

.top-left-group, .top-right-group { display: flex; gap: 8px; pointer-events: auto; }
.top-left-group { flex-direction: column; align-items: flex-start; }
.top-right-group { align-items: center; }

#userProfile {
    display: flex; align-items: center; background: rgba(255, 255, 255, 0.9);
    padding: 4px 12px 4px 4px; border-radius: 25px; border: 2px solid #00a8ff;
    box-shadow: 0 3px 8px rgba(0,0,0,0.1); gap: 8px;
}
.profile-pic { width: 28px; height: 28px; border-radius: 50%; object-fit: contain; background: #dff9fb; border: 1px solid #00a8ff; }
.username { font-size: 3.5vmin; color: #0097e6; font-weight: 700; }

#livesContainer { display: flex; gap: 5px; margin-left: 5px; }
.heart-icon { width: 25px; height: 25px; object-fit: contain; filter: drop-shadow(0 2px 2px rgba(0,0,0,0.2)); }
.heart-lost { opacity: 0.3; filter: grayscale(100%); }

#activePowerup {
    position: absolute; top: 140px; left: 50%; transform: translateX(-50%);
    background: rgba(255, 215, 0, 0.9); padding: 5px 15px; border-radius: 15px;
    border: 2px solid #fff; animation: pulse 1s infinite;
}
#powerupText { color: #fff; font-weight: bold; font-size: 4vmin; text-shadow: 1px 1px 0 #000; }
@keyframes pulse { 0% { transform: translateX(-50%) scale(1); } 50% { transform: translateX(-50%) scale(1.1); } 100% { transform: translateX(-50%) scale(1); } }

#scoreBoard {
    background: rgba(255, 255, 255, 0.9); padding: 4px 12px; border-radius: 25px;
    display: flex; align-items: center; gap: 6px; box-shadow: 0 3px 8px rgba(0,0,0,0.1);
    border: 2px solid #00a8ff; height: 32px;
}
.score-icon { width: 22px; height: 22px; object-fit: contain; }
.score-val { font-size: 5vmin; color: #0097e6; font-weight: 700; }

#menuBtn {
    width: 40px; height: 40px; background: white; border: 2px solid #00a8ff; border-radius: 12px;
    cursor: pointer; display: flex; flex-direction: column; justify-content: center; align-items: center;
    gap: 4px; box-shadow: 0 3px 8px rgba(0,0,0,0.1);
}
#menuBtn .bar { width: 20px; height: 3px; background-color: #00a8ff; border-radius: 2px; }
body.dark-mode #userProfile, body.dark-mode #scoreBoard, body.dark-mode #menuBtn { background: rgba(45, 52, 54, 0.9); border-color: #74b9ff; }
body.dark-mode .username, body.dark-mode .score-val { color: #74b9ff; }
body.dark-mode #menuBtn .bar { background-color: #74b9ff; }

.settings-box { background: rgba(255, 255, 255, 0.8); padding: 20px; border-radius: 20px; width: 70%; margin: 20px 0; }
body.dark-mode .settings-box { background: rgba(0, 0, 0, 0.5); }
.setting-item { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; font-size: 5vmin; font-weight: 700; color: #0097e6; }
body.dark-mode .setting-item { color: #74b9ff; }
.setting-item:last-child { margin-bottom: 0; }
.switch { position: relative; display: inline-block; width: 50px; height: 28px; }
.switch input { opacity: 0; width: 0; height: 0; }
.slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; }
.slider:before { position: absolute; content: ""; height: 20px; width: 20px; left: 4px; bottom: 4px; background-color: white; transition: .4s; }
input:checked + .slider { background-color: #00a8ff; }
input:checked + .slider:before { transform: translateX(22px); }
.slider.round { border-radius: 34px; } .slider.round:before { border-radius: 50%; }

.logo-area h1 { font-size: 13vmin; line-height: 0.9; text-align: center; color: #00a8ff; text-shadow: 4px 4px 0px #ffffff, 6px 6px 0px #0984e3; margin-bottom: 20px; animation: bounce 2s infinite ease-in-out; }
.pie-text { color: #ff9f43; text-shadow: 4px 4px 0px #ffffff, 6px 6px 0px #d35400; }
@keyframes bounce { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }

.highscore-badge { background: #ffeaa7; color: #d35400; padding: 5px 15px; border-radius: 15px; font-weight: bold; margin-bottom: 10px; border: 2px dashed #d35400; }
.highscore-small { font-size: 4vmin; color: #00b894; margin-top: 5px; font-weight: bold; }
.score-card { background: white; padding: 20px; border-radius: 25px; width: 60%; text-align: center; margin-bottom: 20px; color: #333; }
.menu-title, .game-over-title { font-size: 10vmin; color: #0097e6; margin-bottom: 20px; text-align: center; width: 100%; }
body.dark-mode .score-card { background: #dfe6e9; }
body.dark-mode .menu-title, body.dark-mode .game-over-title { color: #74b9ff; }
.loader { border: 6px solid rgba(0, 168, 255, 0.2); border-top: 6px solid #00a8ff; border-radius: 50%; width: 50px; height: 50px; animation: spin 1s linear infinite; margin-bottom: 15px; }
#loadingText { font-size: 4vmin; color: #0097e6; font-weight: 700; letter-spacing: 2px; }
@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }